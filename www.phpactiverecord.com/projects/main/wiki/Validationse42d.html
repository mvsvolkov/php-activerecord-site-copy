<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
	
<!-- Mirrored from www.phpactiverecord.com/projects/main/wiki/Validations?version=1 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 20:17:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
		<title>PHP ActiveRecord - Validations - An easy to use ORM for PHP</title>
		<link rel="canonical" href="http://www.phpactiverecord.org/projects/main/wiki/Validations"/>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="issue,bug,tracker" />
		<meta name="description" content="Redmine" />
		<meta name="googlebot" content="NOODP" />
		<meta name="robots" content="index,follow,noodp,noydir" />
		<link href="../../../stylesheets/blueprint/screen35c2.css?1366183229" media="screen" rel="stylesheet" type="text/css" />
		<link href="../../../stylesheets/blueprint/print35c2.css?1366183229" media="print" rel="stylesheet" type="text/css" />
		<!--[if lt IE 8]><link href="/stylesheets/blueprint/ie.css?1366183229" media="screen" rel="stylesheet" type="text/css" /><![endif]-->
		<link href="../../../themes/basecamp/stylesheets/application3445.css?1366183196" media="screen" rel="stylesheet" type="text/css" />
		<link href="../../../stylesheets/jstoolbar35c2.css?1366183229" media="screen" rel="stylesheet" type="text/css" />
		<!--[if IE]>
		    <style type="text/css">
		      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
		      body {behavior: url(/stylesheets/csshover.htc?1366183229);}
		    </style>
		<![endif]-->
		
		<!-- page specific tags -->
		
  <link href="../../../stylesheets/scm35c2.css?1366183229" media="screen" rel="stylesheet" type="text/css" />
		<link href="../../../themes/basecamp/stylesheets/main3445.css?1366183196" media="screen" rel="stylesheet" type="text/css" />
	</head>
<body>
	
<div id="wrapper">
	<div id="header">
	    <div class="container">
	        <div class="span-7">
	            <h1><a href="http://www.phpactiverecord.org/" target="_top">php.activerecord</a></h1>
	        </div>
	        <div class="span-13" id="main-nav">
		        <ul class="horizontal"><li><a href="../../../download/index/main.html" class="download">Download</a></li>
<li><a href="Validations.html" class="guides">Wiki</a></li>
<li><a href="../../../docs/index/main.html" class="docs">Docs</a></li>
<li><a href="../../../news/index/mainddf6.html?project_id=main" class="news">News</a></li>
<li><a href="../boards.html" class="boards">Forums</a></li>
<li><a href="../../../welcome/about/main.html" class="about-us">About us</a></li></ul>	        </div>
          <div class="span-4 last" id="account-menu">
		        <ul class="horizontal"><li><a href="../../../login.html" class="login">Sign in</a></li>
<li><a href="../../../account/register.html" class="register">Register</a></li></ul>          </div>
	    </div>
	</div>

	<div id="main-frame">
		<div id="breadcrumbs" class="container">
			<ul class="span-24 last">
				<li><a href="../../../index.html">Home</a></li><li><a href="../wiki.html">Wiki</a></li><li class="last"><a href="Validations.html">Validations</a></li>
			</ul>
		</div>

		<div id="main" class="container">
			<div id="content" class="span-16 colborder">
				
				<div class="contextual">


<span id="watcher"></span>






<a href="Validations/history.html" class="icon icon-history">History</a>
</div>




    <p>    
    
    Version 1/19
     - 
    <a href="Validations67d9.html?version=2">Next &#187;</a> - 
    <a href="Validations.html">Current version</a>
    <br />
    <em>Kien La, 2010-06-19 05:57 PM </em><br />
    
    </p>
    <hr />


<div class="wiki">
  <h2 id="Validations">Validations<a href="#Validations" class="wiki-anchor">&para;</a></h2>


	<p>On the contrary, validations offer a simple and powerful pattern to ensure the integrity of your data. By declaring validations on your models, you can be certain that only valid data will be saved to your database. No longer will you need to recall where you put that function which verifies the legitimacy of an e-mail and whether or not it will stop the record fom being saved. With validations, if your data is invalid, ActiveRecord will take care of marking the record as invalid instead of writing it to the database.</p>


	<p>Validations will run for the following methods normally:</p>


<pre class="code"><code class="php syntaxhl"><span class="CodeRay"><span class="no">1</span> <span class="lv">$book</span>-&gt;save();
<span class="no">2</span> <span class="co">Book</span>::create();
<span class="no">3</span> <span class="lv">$book</span>-&gt;update_attributes(<span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="k">new title</span><span class="dl">'</span></span>));
</span></code></pre>

	<p>The following will skip validations and save the record:</p>


<pre class="code"><code class="php syntaxhl"><span class="CodeRay"><span class="no">1</span> <span class="lv">$book</span>-&gt;update_attribute();
<span class="no">2</span> <span class="lv">$book</span>-&gt;save(<span class="pc">false</span>); <span class="c"># anytime you pass false to save it will skip validations</span>
</span></code></pre>

	<p>Is my model valid or not?</p>


	<p>You can determine whether or not your model is valid and can be saved to the database by issuing one of these methods: Model::is_valid or Model::is_invalid. Both of these methods will run the validations for your model when invoked.</p>


<pre class="code"><code class="php syntaxhl"><span class="CodeRay"><span class="no"> 1</span> <span class="r">class</span> <span class="cl">Book</span> <span class="r">extends</span> <span class="co">ActiveRecord</span>\<span class="co">Model</span>
<span class="no"> 2</span> {
<span class="no"> 3</span>   <span class="r">static</span> <span class="lv">$validates_presence_of</span> = <span class="pd">array</span>(
<span class="no"> 4</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span>)
<span class="no"> 5</span>   );
<span class="no"> 6</span> }
<span class="no"> 7</span> 
<span class="no"> 8</span> <span class="c"># our book won't pass validates_presence_of</span>
<span class="no"> 9</span> <span class="lv">$book</span> = <span class="r">new</span> <span class="co">Book</span>(<span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="dl">'</span></span>));
<span class="no"><strong>10</strong></span> <span class="pd">echo</span> <span class="lv">$book</span>-&gt;is_valid(); <span class="c"># false</span>
<span class="no">11</span> <span class="pd">echo</span> <span class="lv">$book</span>-&gt;is_invalid(); <span class="c"># true</span>
</span></code></pre>

	<p>If validation(s) fails for your model, then you can access the error message(s) like so. Let's assume that our validation was validates_presence_of.</p>


<pre class="code"><code class="php syntaxhl"><span class="CodeRay"><span class="no"> 1</span> <span class="r">class</span> <span class="cl">Book</span> <span class="r">extends</span> <span class="co">ActiveRecord</span>\<span class="co">Model</span>
<span class="no"> 2</span> {
<span class="no"> 3</span>   <span class="r">static</span> <span class="lv">$validates_presence_of</span> = <span class="pd">array</span>(
<span class="no"> 4</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span>)
<span class="no"> 5</span>   );
<span class="no"> 6</span> }
<span class="no"> 7</span> 
<span class="no"> 8</span> <span class="lv">$book</span> = <span class="r">new</span> <span class="co">Book</span>(<span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="dl">'</span></span>));
<span class="no"> 9</span> <span class="lv">$book</span>-&gt;save();
<span class="no"><strong>10</strong></span> <span class="lv">$book</span>-&gt;errors-&gt;is_invalid(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span>); <span class="c"># =&gt; true</span>
<span class="no">11</span> 
<span class="no">12</span> <span class="c"># if the attribute fails more than 1 validation,</span>
<span class="no">13</span> <span class="c"># you would get an array of errors below</span>
<span class="no">14</span> 
<span class="no">15</span> <span class="pd">echo</span> <span class="lv">$book</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span>); <span class="c"># =&gt; can't be blank</span>
</span></code></pre>

	<p>Now let's assume our model failed two validations: validates_presence_of and validates_size_of.</p>


<pre class="code"><code class="php syntaxhl"><span class="CodeRay"><span class="no"> 1</span> <span class="r">class</span> <span class="cl">Book</span> <span class="r">extends</span> <span class="co">ActiveRecord</span>\<span class="co">Model</span>
<span class="no"> 2</span> {
<span class="no"> 3</span>   <span class="r">static</span> <span class="lv">$validates_presence_of</span> = <span class="pd">array</span>(
<span class="no"> 4</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span>)
<span class="no"> 5</span>   );
<span class="no"> 6</span> 
<span class="no"> 7</span>   <span class="r">static</span> <span class="lv">$validates_size_of</span> = <span class="pd">array</span>(
<span class="no"> 8</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">within</span><span class="dl">'</span></span> =&gt; <span class="pd">array</span>(<span class="i">1</span>,<span class="i">20</span>))
<span class="no"> 9</span>   );
<span class="no"><strong>10</strong></span> }
<span class="no">11</span> 
<span class="no">12</span> <span class="lv">$book</span> = <span class="r">new</span> <span class="co">Book</span>(<span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="dl">'</span></span>));
<span class="no">13</span> <span class="lv">$book</span>-&gt;save();
<span class="no">14</span> <span class="lv">$book</span>-&gt;errors-&gt;is_invalid(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span>); <span class="c"># true</span>
<span class="no">15</span> 
<span class="no">16</span> <span class="pd">print_r</span>(<span class="lv">$book</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span>));
<span class="no">17</span> 
<span class="no">18</span> <span class="c"># which would give us:</span>
<span class="no">19</span> 
<span class="no"><strong>20</strong></span> <span class="c"># Array</span>
<span class="no">21</span> <span class="c"># (</span>
<span class="no">22</span> <span class="c">#   [0] =&gt; can't be blank</span>
<span class="no">23</span> <span class="c">#   [1] =&gt; is too short (minimum is 1 characters)</span>
<span class="no">24</span> <span class="c"># )</span>
</span></code></pre>

	<p>Commonalities</p>


	<p>Validations are defined with a common set of options and some of them have specific options. As you've seen above, creating a validation is as simple as declaring a static validation variable in your model class as a multi-dimensional array (to validate multiple attributes). Each validation will require you to put the attribute name in the 0 index of the array. You can configure the error message by creating a message key with the message string as the value. You can also add an option which will only run the validation on either creation or update. By default, your validation will run everytime Model#save() is called.</p>


<pre class="code"><code class="php syntaxhl"><span class="CodeRay"><span class="no"> 1</span> <span class="r">class</span> <span class="cl">Book</span> <span class="r">extends</span> <span class="co">ActiveRecord</span>\<span class="co">Model</span>
<span class="no"> 2</span> {
<span class="no"> 3</span>   <span class="c"># 0 index is title, the attribute to test against</span>
<span class="no"> 4</span>   <span class="c"># message is our custom error msg</span>
<span class="no"> 5</span>   <span class="c"># only run this validation on creation - not when updating</span>
<span class="no"> 6</span>   <span class="r">static</span> <span class="lv">$validates_presence_of</span> = <span class="pd">array</span>(
<span class="no"> 7</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">message</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="k">cannot be blank on a book!</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">on</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="k">create</span><span class="dl">'</span></span>)
<span class="no"> 8</span>   );
<span class="no"> 9</span> }
</span></code></pre>

	<p>In some validations you may use: in, is within. In/within designate a range whereby you use an array with the first and second elements representing the beginning and end of the range respectively. Is represents equality.</p>


	<p>Available validations</p>


	<p>There are a number of pre-defined validation routines that you can declare on your model for specific attributes.</p>


	<ul>
	<li>validates_presence_of</li>
		<li>validates_size_of</li>
		<li>validates_length_of</li>
		<li>validates_(in|ex)clusion_of</li>
		<li>validates_format_of</li>
		<li>validates_numericality_of</li>
		<li>validates_uniqueness_of</li>
		<li>validates_presence_of</li>
	</ul>


	<p>This is probably the simplest of all the validations. It will make sure that the value of the attribute is not null or a blank string. Available options:</p>


	<ul>
	<li>message: default: <strong>can't be blank</strong></li>
	</ul>


<pre class="code"><code class="php syntaxhl"><span class="CodeRay"><span class="no"> 1</span> <span class="r">class</span> <span class="cl">Book</span> <span class="r">extends</span> <span class="co">ActiveRecord</span>\<span class="co">Model</span>
<span class="no"> 2</span> {
<span class="no"> 3</span>   <span class="r">static</span> <span class="lv">$validates_presence_of</span> = <span class="pd">array</span>(
<span class="no"> 4</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span>),
<span class="no"> 5</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">cover_blurb</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">message</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="k">must be present and witty</span><span class="dl">'</span></span>)
<span class="no"> 6</span>   );
<span class="no"> 7</span> }
<span class="no"> 8</span> 
<span class="no"> 9</span> <span class="lv">$book</span> = <span class="r">new</span> <span class="co">Book</span>(<span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="dl">'</span></span>));
<span class="no"><strong>10</strong></span> <span class="lv">$book</span>-&gt;save();
<span class="no">11</span> 
<span class="no">12</span> <span class="pd">echo</span> <span class="lv">$book</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">cover_blurb</span><span class="dl">'</span></span>); <span class="c"># =&gt; must be present and witty</span>
<span class="no">13</span> <span class="pd">echo</span> <span class="lv">$book</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span>); <span class="c"># =&gt; can't be blank</span>
</span></code></pre>

	<p>validates_size_of / validates_length_of</p>


	<p>These two validations are one and the same. The purpose is to validate the length in characters of a given attribute. Available options:</p>


	<p>is: attribute should be exactly n characters long<br />in/within: attribute should be within an range array(1,5)<br />maximum/minimum: attribute should not be above/below respectively<br />Each of the options has a particular message and can be changed.</p>


	<p>is: uses key 'wrong_length'<br />in/within: uses keys 'too_long' &#38; 'too_short'<br />maximum/minimum: uses keys 'too_long' &#38; 'too_short'</p>


<pre class="code"><code class="php syntaxhl"><span class="CodeRay"><span class="no"> 1</span> <span class="r">class</span> <span class="cl">Book</span> <span class="r">extends</span> <span class="co">ActiveRecord</span>\<span class="co">Model</span>
<span class="no"> 2</span> {
<span class="no"> 3</span>   <span class="r">static</span> <span class="lv">$validates_size_of</span> = <span class="pd">array</span>(
<span class="no"> 4</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">within</span><span class="dl">'</span></span> =&gt; <span class="pd">array</span>(<span class="i">1</span>,<span class="i">5</span>), <span class="s"><span class="dl">'</span><span class="k">too_short</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="k">too short!</span><span class="dl">'</span></span>),
<span class="no"> 5</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">cover_blurb</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">is</span><span class="dl">'</span></span> =&gt; <span class="i">20</span>),
<span class="no"> 6</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">description</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">maximum</span><span class="dl">'</span></span> =&gt; <span class="i">10</span>, <span class="s"><span class="dl">'</span><span class="k">too_long</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="k">should be short and sweet</span><span class="dl">'</span></span>)
<span class="no"> 7</span>   );
<span class="no"> 8</span> }
<span class="no"> 9</span> 
<span class="no"><strong>10</strong></span> <span class="lv">$book</span> = <span class="r">new</span> <span class="co">Book</span>;
<span class="no">11</span> <span class="lv">$book</span>-&gt;title = <span class="s"><span class="dl">'</span><span class="k">War and Peace</span><span class="dl">'</span></span>;
<span class="no">12</span> <span class="lv">$book</span>-&gt;cover_blurb = <span class="s"><span class="dl">'</span><span class="k">not 20 chars</span><span class="dl">'</span></span>;
<span class="no">13</span> <span class="lv">$book</span>-&gt;description = <span class="s"><span class="dl">'</span><span class="k">this description is longer than 10 chars</span><span class="dl">'</span></span>;
<span class="no">14</span> <span class="lv">$ret</span> = <span class="lv">$book</span>-&gt;save();
<span class="no">15</span> 
<span class="no">16</span> <span class="c"># validations failed so we get a false return</span>
<span class="no">17</span> <span class="r">if</span> (<span class="lv">$ret</span> == <span class="pc">false</span>)
<span class="no">18</span> {
<span class="no">19</span>   <span class="c"># too short!</span>
<span class="no"><strong>20</strong></span>   <span class="pd">echo</span> <span class="lv">$book</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">title</span><span class="dl">'</span></span>);
<span class="no">21</span> 
<span class="no">22</span>   <span class="c"># is the wrong length (should be 20 chars)</span>
<span class="no">23</span>   <span class="pd">echo</span> <span class="lv">$book</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">cover_blurb</span><span class="dl">'</span></span>);
<span class="no">24</span> 
<span class="no">25</span>   <span class="c"># should be short and sweet</span>
<span class="no">26</span>   <span class="pd">echo</span> <span class="lv">$book</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">description</span><span class="dl">'</span></span>);
<span class="no">27</span> }
</span></code></pre>

	<p>validates_(in|ex)clusion_of</p>


	<p>As you can see from the names, these two are similar. In fact, this is just a white/black list approach to your validations. Inclusion is a whitelist that will require a value to be within a given set. Exclusion is the opposite: a blacklist that requires a value to not be within a given set. Available options:</p>


	<p>in/within: attribute should/shouldn't be a value within an array<br />message: custom error message</p>


<pre class="code"><code class="php syntaxhl"><span class="CodeRay"><span class="no"> 1</span> <span class="r">class</span> <span class="cl">Car</span> <span class="r">extends</span> <span class="co">ActiveRecord</span>\<span class="co">Model</span>
<span class="no"> 2</span> {
<span class="no"> 3</span>   <span class="r">static</span> <span class="lv">$validates_inclusion_of</span> = <span class="pd">array</span>(
<span class="no"> 4</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">fuel_type</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">in</span><span class="dl">'</span></span> =&gt; <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">hyrdogen</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">petroleum</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">bio-diesel</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">electric</span><span class="dl">'</span></span>)),
<span class="no"> 5</span>   );
<span class="no"> 6</span> }
<span class="no"> 7</span> 
<span class="no"> 8</span> <span class="c"># this will pass since it's in the above list</span>
<span class="no"> 9</span> <span class="lv">$car</span> = <span class="r">new</span> <span class="co">Car</span>(<span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">fuel_type</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="k">electric</span><span class="dl">'</span></span>));
<span class="no"><strong>10</strong></span> <span class="lv">$ret</span> = <span class="lv">$car</span>-&gt;save();
<span class="no">11</span> <span class="pd">echo</span> <span class="lv">$ret</span> <span class="c"># =&gt; true</span>
<span class="no">12</span> 
<span class="no">13</span> <span class="r">class</span> <span class="cl">User</span> <span class="r">extends</span> <span class="co">ActiveRecord</span>\<span class="co">Model</span>
<span class="no">14</span> {
<span class="no">15</span>   <span class="r">static</span> <span class="lv">$validates_exclusion_of</span> = <span class="pd">array</span>(
<span class="no">16</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">password</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">in</span><span class="dl">'</span></span> =&gt; <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">god</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">sex</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">password</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">love</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">secret</span><span class="dl">'</span></span>),
<span class="no">17</span>       <span class="s"><span class="dl">'</span><span class="k">message</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="k">should not be one of the four most used passwords</span><span class="dl">'</span></span>)
<span class="no">18</span>   );
<span class="no">19</span> }
<span class="no"><strong>20</strong></span> 
<span class="no">21</span> <span class="lv">$user</span> = <span class="r">new</span> <span class="co">User</span>;
<span class="no">22</span> <span class="lv">$user</span>-&gt;password = <span class="s"><span class="dl">'</span><span class="k">god</span><span class="dl">'</span></span>;
<span class="no">23</span> <span class="lv">$user</span>-&gt;save();
<span class="no">24</span> <span class="pd">echo</span> <span class="lv">$user</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">password</span><span class="dl">'</span></span>); <span class="c"># =&gt; should not be one of the four most used passwords</span>
</span></code></pre>

	<p>validates_format_of</p>


	<p>This validation uses preg_match to verify the format of an attribute. You can create a regular expression to test against. Available options:</p>


	<p>with: regular expression<br />message: custom error message</p>


<pre class="code"><code class="php syntaxhl"><span class="CodeRay"><span class="no"> 1</span> <span class="r">class</span> <span class="cl">User</span> <span class="r">extends</span> <span class="co">ActiveRecord</span>\<span class="co">Model</span>
<span class="no"> 2</span> {
<span class="no"> 3</span>   <span class="r">static</span> <span class="lv">$validates_format_of</span> = <span class="pd">array</span>(
<span class="no"> 4</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">email</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">with</span><span class="dl">'</span></span> =&gt;
<span class="no"> 5</span>       <span class="s"><span class="dl">'</span><span class="k">/^[^0-9][A-z0-9_]+([.][A-z0-9_]+)*[@][A-z0-9_]+([.][A-z0-9_]+)*[.][A-z]{2,4}$/</span><span class="dl">'</span></span>)
<span class="no"> 6</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">password</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">with</span><span class="dl">'</span></span> =&gt;
<span class="no"> 7</span>       <span class="s"><span class="dl">'</span><span class="k">/^.*(?=.{8,})(?=.*</span><span class="k">\d</span><span class="k">)(?=.*[a-z])(?=.*[A-Z]).*$/</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">message</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="k">is too weak</span><span class="dl">'</span></span>)
<span class="no"> 8</span>   );
<span class="no"> 9</span> }
<span class="no"><strong>10</strong></span> 
<span class="no">11</span> <span class="lv">$user</span> = <span class="r">new</span> <span class="co">User</span>;
<span class="no">12</span> <span class="lv">$user</span>-&gt;email = <span class="s"><span class="dl">'</span><span class="k">not_a_real_email.com</span><span class="dl">'</span></span>;
<span class="no">13</span> <span class="lv">$user</span>-&gt;password = <span class="s"><span class="dl">'</span><span class="k">notstrong</span><span class="dl">'</span></span>;
<span class="no">14</span> <span class="lv">$user</span>-&gt;save();
<span class="no">15</span> 
<span class="no">16</span> <span class="pd">echo</span> <span class="lv">$user</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">email</span><span class="dl">'</span></span>); <span class="c"># =&gt; is invalid</span>
<span class="no">17</span> <span class="pd">echo</span> <span class="lv">$user</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">password</span><span class="dl">'</span></span>); <span class="c"># =&gt; is too weak</span>
</span></code></pre>

	<p>validates_numericality_of</p>


	<p>As the name suggests, this gem tests whether or not a given attribute is a number, and whether or not it is of a certain value. Available options:</p>


	<p>only_integer: value must be an integer (e.g. not a float), message: "is not a number" <br />even, message: "must be even" <br />odd, message: "must be odd" <br />greater_than: >, message: "must be greater than %d" <br />greater_than_or_equal_to: >=, message: "must be greater than or equal to %d" <br />equal_to: ==, message: "must be equal to %d" <br />less_than: <, message: "must be less than %d" <br />less_than_or_equal_to: <=, message: "must be less than or equal to %d"</p>


<pre class="code"><code class="php syntaxhl"><span class="CodeRay"><span class="no"> 1</span> <span class="r">class</span> <span class="cl">Order</span> <span class="r">extends</span> <span class="co">ActiveRecord</span>\<span class="co">Model</span>
<span class="no"> 2</span> {
<span class="no"> 3</span>   <span class="r">static</span> <span class="lv">$validates_numericality_of</span> = <span class="pd">array</span>(
<span class="no"> 4</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">price</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">greater_than</span><span class="dl">'</span></span> =&gt; <span class="fl">0.01</span>),
<span class="no"> 5</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">quantity</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">only_integer</span><span class="dl">'</span></span> =&gt; <span class="pc">true</span>),
<span class="no"> 6</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">shipping</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">greater_than_or_equal_to</span><span class="dl">'</span></span> =&gt; <span class="i">0</span>),
<span class="no"> 7</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">discount</span><span class="dl">'</span></span>, <span class="s"><span class="dl">'</span><span class="k">less_than_or_equal_to</span><span class="dl">'</span></span> =&gt; <span class="i">5</span>, <span class="s"><span class="dl">'</span><span class="k">greater_than_or_equal_to</span><span class="dl">'</span></span> =&gt; <span class="i">0</span>)
<span class="no"> 8</span>   );
<span class="no"> 9</span> }
<span class="no"><strong>10</strong></span> 
<span class="no">11</span> <span class="lv">$order</span> = <span class="r">new</span> <span class="co">Order</span>;
<span class="no">12</span> <span class="lv">$order</span>-&gt;price = <span class="i">0</span>;
<span class="no">13</span> <span class="lv">$order</span>-&gt;quantity = <span class="fl">1.25</span>;
<span class="no">14</span> <span class="lv">$order</span>-&gt;shipping = <span class="i">5</span>;
<span class="no">15</span> <span class="lv">$order</span>-&gt;discount = <span class="i">2</span>;
<span class="no">16</span> <span class="lv">$order</span>-&gt;save();
<span class="no">17</span> 
<span class="no">18</span> <span class="pd">echo</span> <span class="lv">$order</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">price</span><span class="dl">'</span></span>); <span class="c"># =&gt; must be greater than 0.01</span>
<span class="no">19</span> <span class="pd">echo</span> <span class="lv">$order</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">quantity</span><span class="dl">'</span></span>); <span class="c"># =&gt; is not a number</span>
<span class="no"><strong>20</strong></span> <span class="pd">echo</span> <span class="lv">$order</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">shipping</span><span class="dl">'</span></span>); <span class="c"># =&gt; null</span>
<span class="no">21</span> <span class="pd">echo</span> <span class="lv">$order</span>-&gt;errors-&gt;on(<span class="s"><span class="dl">'</span><span class="k">discount</span><span class="dl">'</span></span>); <span class="c"># =&gt; null</span>
</span></code></pre>

	<p>validates_uniqueness_of</p>


	<p>Tests whether or not a given attribute already exists in the table or not.</p>


	<p>message: custom error message</p>


<pre class="code"><code class="php syntaxhl"><span class="CodeRay"><span class="no"> 1</span> <span class="r">class</span> <span class="cl">User</span> <span class="r">extends</span> <span class="co">ActiveRecord</span>\<span class="co">Model</span>
<span class="no"> 2</span> {
<span class="no"> 3</span>   <span class="r">static</span> <span class="lv">$validates_uniqueness_of</span> = <span class="pd">array</span>(
<span class="no"> 4</span>     <span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">name</span><span class="dl">'</span></span>),
<span class="no"> 5</span>     <span class="pd">array</span>(<span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">blah</span><span class="dl">'</span></span>,<span class="s"><span class="dl">'</span><span class="k">bleh</span><span class="dl">'</span></span>), <span class="s"><span class="dl">'</span><span class="k">message</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="k">blah and bleh!</span><span class="dl">'</span></span>)
<span class="no"> 6</span>   );
<span class="no"> 7</span> }
<span class="no"> 8</span> 
<span class="no"> 9</span> <span class="co">User</span>::create(<span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">name</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="k">Tito</span><span class="dl">'</span></span>));
<span class="no"><strong>10</strong></span> <span class="lv">$user</span> = <span class="co">User</span>::create(<span class="pd">array</span>(<span class="s"><span class="dl">'</span><span class="k">name</span><span class="dl">'</span></span> =&gt; <span class="s"><span class="dl">'</span><span class="k">Tito</span><span class="dl">'</span></span>));
<span class="no">11</span> <span class="lv">$user</span>-&gt;is_valid(); <span class="c"># =&gt; false</span>
</span></code></pre>
</div>






<p class="other-formats">Also available in:
	<span><a href="Validationsa004.html?format=html&amp;version=1" class="html" rel="nofollow">HTML</a></span>
	<span><a href="Validations854f.html?format=txt&amp;version=1" class="txt" rel="nofollow">TXT</a></span>
</p>







				
			</div>

			<div id="sidebar" class="span-7 last">
				<div class="r-button" id="stable-build">
					<a href="../../../download.html">Get Stable Build - <em>v1.0</em><p>June 27 2010</p></a>
				</div>
				<div class="r-button" id="nightly-build">
					<a href="../../../download.html">Get Nightly Build <p>April 16, 2013</p></a>
				</div>
		
				

				<h2 id="news-header">
	<a href="../../../news.html">Latest News</a>
	<a class="feed" href="../news.atom"><img src="../../../images/feed-icon-14x14.png"/></a>
</h2>

<ul id="news-summary" class="icon-list">
	
	<li class="article">
		<a href="../../../news/6-website-downtime.html">Website Downtime</a>
		
		<div class="meta">
			<em class="relative" title="2011-09-26T16:43:49Z">Mon Sep 26 12:43:49 -0400 2011</em> ago
			
		</div>
		
	</li>
	
	<li class="article">
		<a href="../../../news/5-did-you-know-php-ar-has-eager-loading.html">Did you know? PHP-AR has Eager Loading</a>
		
		<div class="meta">
			<em class="relative" title="2010-08-31T23:31:08Z">Tue Aug 31 19:31:08 -0400 2010</em> ago
			
		</div>
		
	</li>
	
	<li class="article">
		<a href="../../../news/4-php-activerecord-1-0-released.html">php-activerecord 1.0 released!</a>
		
		<div class="meta">
			<em class="relative" title="2010-06-28T00:02:55Z">Sun Jun 27 20:02:55 -0400 2010</em> ago
			
		</div>
		
	</li>
	
	<li class="article">
		<a href="../../../news/3-website-updated-with-forums-and-wiki.html">Website updated with forums and wiki</a>
		
		<div class="meta">
			<em class="relative" title="2010-06-18T21:37:23Z">Fri Jun 18 17:37:23 -0400 2010</em> ago
			
		</div>
		
	</li>
	
	<li class="article">
		<a href="../../../news/2-php-activerecord-1-0-rc1-released.html">php-activerecord 1.0 RC1 released!</a>
		
		<div class="meta">
			<em class="relative" title="2010-04-07T00:00:15Z">Tue Apr 06 20:00:15 -0400 2010</em> ago
			
		</div>
		
	</li>
	
</ul>




				<h2><a href="../activity.html">Recent Activity</a></h2>
<ul id="recent-activity" class="icon-list">
		<li class="message">
	  
		<a href="http://www.phpactiverecord.com/boards/1/topics/2069-re-support-for-multi-row-inserts-and-insert-ignore">Encotrei uma solução alternativa para varias inserções.

Model::query(&#39;inse...</a>
		
		<div class="author">
			by <a href="../../../users/3231.html">renan henrique constancio</a>
			<em class="relative" title="2017-03-17T14:08:17Z">Fri Mar 17 10:08:17 -0400 2017</em>
		</div>
	</li>
		<li class="message">
	  
		<a href="http://www.phpactiverecord.com/boards/4/topics/2068-re-can-t-get-groupname-using-associations">I have the same question, have you find the answer?</a>
		
		<div class="author">
			by <a href="../../../users/3194.html">Israel Sousa</a>
			<em class="relative" title="2017-03-03T19:52:52Z">Fri Mar 03 14:52:52 -0500 2017</em>
		</div>
	</li>
		<li class="message">
	  
		<a href="http://www.phpactiverecord.com/boards/4/topics/2067-cannot-change-primary_key">Hi, 
I cannot change  $primary_key of entity.
After save is still in database o...</a>
		
		<div class="author">
			by <a href="../../../users/2785.html">Vasek Keberdle</a>
			<em class="relative" title="2017-01-03T17:20:13Z">Tue Jan 03 12:20:13 -0500 2017</em>
		</div>
	</li>
		<li class="message">
	  
		<a href="http://www.phpactiverecord.com/boards/4/topics/2066-re-saving-date-to-mysql-problem">That static property is not available anymore in stable build 1.0, so that won&#39;t ...</a>
		
		<div class="author">
			by <a href="../../../users/3038.html">Jos Faber</a>
			<em class="relative" title="2016-12-07T13:21:47Z">Wed Dec 07 08:21:47 -0500 2016</em>
		</div>
	</li>
		<li class="message">
	  
		<a href="http://www.phpactiverecord.com/boards/4/topics/2065-re-can-t-get-groupname-using-associations">Project is dead?</a>
		
		<div class="author">
			by <a href="../../../users/2948.html">McLotos McLotos</a>
			<em class="relative" title="2016-09-28T09:58:57Z">Wed Sep 28 05:58:57 -0400 2016</em>
		</div>
	</li>
		<li class="commit">
	  
		<a href="http://github.com/kla/php-activerecord/commit/96100175f2c268648a6b9fad3157620a6a6649d1">Merge pull request #284 from fetch/test-require-fix

Using __DIR__ in require_onc...</a>
		
		<div class="author">
			by <a href="../../../users/3.html">Jacques Fuentes</a>
			<em class="relative" title="2013-04-15T13:09:16Z">Mon Apr 15 09:09:16 -0400 2013</em>
		</div>
	</li>
		<li class="commit">
	  
		<a href="http://github.com/kla/php-activerecord/commit/f8220bfaaf820f53d99e3c97b97b4a5ee2a0adfe">absolute path require_once</a>
		
		<div class="author">
			by <a href="../../../users/1660.html">Koen Punt</a>
			<em class="relative" title="2013-04-15T08:07:39Z">Mon Apr 15 04:07:39 -0400 2013</em>
		</div>
	</li>
		<li class="commit">
	  
		<a href="http://github.com/kla/php-activerecord/commit/17eb9c6155ae3fb8ac144ab07ee828a19a8be9c1">Re #282, pointing phpunit at the tests...</a>
		
		<div class="author">
			by <a href="../../../users/show/David%20Rogers%20.html">David Rogers </a>
			<em class="relative" title="2013-04-11T20:39:30Z">Thu Apr 11 16:39:30 -0400 2013</em>
		</div>
	</li>
		<li class="commit">
	  
		<a href="http://github.com/kla/php-activerecord/commit/ec53c90187577c9671fd16a1a96979aed067b8cf">Driving tests with phpunit.xml re #282</a>
		
		<div class="author">
			by <a href="../../../users/show/David%20Rogers%20.html">David Rogers </a>
			<em class="relative" title="2013-04-11T20:26:29Z">Thu Apr 11 16:26:29 -0400 2013</em>
		</div>
	</li>
		<li class="commit">
	  
		<a href="http://github.com/kla/php-activerecord/commit/d8c90b6a640da93539ec0e758e60800fcee9bc8a">Create .travis.yml to drive Travis CI build</a>
		
		<div class="author">
			by <a href="../../../users/show/David%20Rogers%20.html">David Rogers </a>
			<em class="relative" title="2013-04-11T19:39:42Z">Thu Apr 11 15:39:42 -0400 2013</em>
		</div>
	</li>
	</ul>


				
  
<h3>Wiki</h3>

<a href="../wiki.html">Start page</a><br />
<a href="Page_index.html">Index by title</a><br />
<a href="Date_index.html">Index by date</a><br />


				
			</div>
		</div>
	</div>

	<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>

	<div id="footer">
	    <div class="container">
	        <div class="span-24 last">
			    <ul class="horizontal">
	<li><a href="../../../index.html">Home</a></li>
	<li><a href="../../../download/index/main.html">Download</a></li>
	<li><a href="Validations.html">Wiki</a></li>
	<li><a href="../../../docs.html">Documentation</a></li>
	<li><a href="http://github.com/kla/php-activerecord/issues">Issues</a></li
	<li><a href="../../../news.html">News</a></li>
	<li><a href="../boards.html">Forums</a></li>
	<li class="last"><a href="../../../welcome/about.html">About Us</a></li>
</ul>
<p>
	<a href="http://www.phpactiverecord.org/" target="_top">phpactiverecord.org - An easy to use ORM for PHP</a><br/>
	<a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a>
</p>

	        </div>
	    </div>
	</div>
</div>


<script src="../../../assets/core35c2.js?1366183229" type="text/javascript"></script>


<script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script>
<script type="text/javascript">try { var pageTracker = _gat._getTracker("UA-10078176-1"); pageTracker._trackPageview();} catch(err) {}</script>



</body>

<!-- Mirrored from www.phpactiverecord.com/projects/main/wiki/Validations?version=1 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 19 May 2017 20:17:04 GMT -->
</html>
